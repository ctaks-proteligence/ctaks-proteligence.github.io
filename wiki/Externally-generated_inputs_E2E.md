# Externally-generated inputs E2E

# Overview

As part of improving the user experience regarding manual inputs, we are
automating calculation of the following E2E (End-to-End Claims
Experience) Scorecard inputs:

- ITS Claims/Adjustments Finalized \<= 30 Days
- ITS Claims/Adjustments Finalized \<= 60 Days
- ITS Claims/Adjustments Finalized \<= 90 Days
- ITS Claims/Adjustments Finalized Total

# Files

E2E input submission should have its own stage, success, and failure
directories, configurable in the same manner as ETL's. The Plan will
provide files for the inputs to the appropriate stage directory.

The supported files have the following characteristics:

- ASCII
- Comma-separated, without quotation marks around each value
- Must include a column header row (titles specified below; case
  insensitive) when containing one or more records
- Possible fixed-width (space-padded) values (if generated by a custom
  process)

Due to the last point, the process must trim whitespace from all values
read from a file.

Each file must not contain duplicates (defined as multiple rows having
the same key). If duplicates exist in a file, the behavior is undefined.

The process moves each file to the success or failure directory as
appropriate; success indicates all records in the file are able to be
parsed according to these requirements.

# Performance Level mapping

The files contain a column called Plan. Each Plan is mapped to one or
more Performance Levels, defined in a configuration file. More than one
Plan may map to the same Performance Level, in which case all mapped
Plans' values are aggregated to that Performance Level. The
configuration file must specify only leaf Performance Levels.

The process follows the input-dependent logic specified below to
aggregate each Plan. It then follows the same logic to aggregate the
Plans to each Performance Level as mapped.

# Data Storage

Store all data from the input files for potential future use (possible
new FlexReport, etc.).

# Input Submission

Submit the specified inputs for all Performance Levels mapped in the
configuration file, including Performance Levels without any
corresponding rows in the files. Input values stored default to 0.

Submit the inputs for the (configurable) most recent *n* Actual Dates;
determine the potential Actual Dates by using the dates of all records
from the Tied to Actual Date? column specified below. Since these values
do not roll-up across dates for E2E inputs, only the dates affected by
the loaded data need to be submitted.

# File Contents

The files contain the specified counts separated by Host_Home_Ind,
Report Date, Plan, Partner Plan, and Claim Type. A Plan can be listed
multiple times, once per Claim Type per Partner Plan.

The following columns exist in the file:

<table>
  <tr>
    <th>Header Text in File</th>
    <th>Part of Key?</th>
    <th>Tied to Actual Date?</th>
    <th>Format</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>Host_Home_Ind</td>
    <td>'''Yes'''</td>
    <td>No</td>
    <td>String</td>
    <td>The perspective; the values match those used by IPDS ('1' = Host, '2' = Home)</td>
  </tr>
  <tr>
    <td>Report_Date</td>
    <td>'''Yes'''</td>
    <td>'''Yes'''</td>
    <td>Date (YYYY-MM-DD)</td>
    <td>The report date for which the E2E values apply</td>
  </tr>
  <tr>
    <td>Plan</td>
    <td>'''Yes'''</td>
    <td>No</td>
    <td>String</td>
    <td>The Plan associated with the data; maps to Performance Level(s)</td>
  </tr>
  <tr>
    <td>Partner</td>
    <td>'''Yes'''</td>
    <td>No</td>
    <td>String</td>
    <td>The Partner Plan associated with the data</td>
  </tr>
  <tr>
    <td>Claim_Type</td>
    <td>'''Yes'''</td>
    <td>No</td>
    <td>String</td>
    <td>The Claim Type of the data which should be one of the following:* Inpatient* Outpatient* Professional* Overall
    </td>
  </tr>
  <tr>
    <td>LE15</td>
    <td>No</td>
    <td>No</td>
    <td>Integer</td>
    <td>The count of claims with an E2E age of &lt;= 15 Days</td>
  </tr>
  <tr>
    <td>LE30</td>
    <td>No</td>
    <td>No</td>
    <td>Integer</td>
    <td>The count of claims with an E2E age of &lt;= 30 Days</td>
  </tr>
  <tr>
    <td>LE60</td>
    <td>No</td>
    <td>No</td>
    <td>Integer</td>
    <td>The count of claims with an E2E age of &lt;= 60 Days</td>
  </tr>
  <tr>
    <td>LE90</td>
    <td>No</td>
    <td>No</td>
    <td>Integer</td>
    <td>The count of claims with an E2E age of &lt;= 90 Days</td>
  </tr>
  <tr>
    <td>GT90</td>
    <td>No</td>
    <td>No</td>
    <td>Integer</td>
    <td>The count of claims with an E2E age of &gt; 90 Days</td>
  </tr>
</table>
<br  />

If any of the following are true for any data row in a file, the the log
should indicate the error and the file should consider to have failed
validation:

- There are more or fewer fields than expected
- Host_Home_Ind is not 1 or 2
- Report_Date is not a valid date
- Claim_Type is not one of the values listed in the table above (case
  insensitive)
- Any of the fields defined as integers contain a value that is not an
  integer

If a Plan value has no mapping to a Performance Level, the data should
be stored for future use with no warning given.

# Aggregation

For each Plan, add each Partner's Overall volumes for the same Report
Date to get the Plan's totals for each E2E input. Also, add each Plan's
aggregated volumes to calculate:

- **Total Volume** = **\<= 90 Days Volume** + **\> 90 Days Volume**

Aggregate using the above logic for each Plan-Report Date combination.
Use the Performance Level mapping to sum the input values from
Plan-Report Date to Performance Level-Report Date.

These values are quarter-to-date; the scorecard inputs are
quarter-to-date. Therefore, no summing across Report Dates is
appropriate. The Actual Date in each case is the same as the Report
Date.

Store these values as the corresponding scorecard inputs.
